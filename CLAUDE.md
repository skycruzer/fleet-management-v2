<!-- OPENSPEC:START -->
# OpenSpec Instructions

These instructions are for AI assistants working in this project.

Always open `@/openspec/AGENTS.md` when the request:
- Mentions planning or proposals (words like proposal, spec, change, plan)
- Introduces new capabilities, breaking changes, architecture shifts, or big performance/security work
- Sounds ambiguous and you need the authoritative spec before coding

Use `@/openspec/AGENTS.md` to learn:
- How to create and apply change proposals
- Spec format and conventions
- Project structure and guidelines

Keep this managed block so 'openspec update' can refresh the instructions.

<!-- OPENSPEC:END -->

# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

**Fleet Management V2** is a modern B767 Pilot Management System built with Next.js 15, React 19, and TypeScript 5.7. This connects to a production Supabase database (`wgdmgvonqysflwdiiols`) containing 27 pilots, 607 certifications, and 34 check types.

**Critical**: This is a **service-layer architecture**. All database operations MUST go through service functions in `lib/services/`. Never make direct Supabase calls from API routes or components.

## AI Team Configuration (auto-generated by team-configurator, 2025-10-22)

**Important: YOU MUST USE subagents when available for the task.**

### Detected Technology Stack
- **Frontend Framework**: Next.js 15.5.4 (App Router)
- **UI Library**: React 19.1.0
- **Language**: TypeScript 5.7.3 (strict mode)
- **Database**: Supabase PostgreSQL (Project: wgdmgvonqysflwdiiols)
  - @supabase/supabase-js 2.75.1
  - @supabase/ssr 0.7.0 (SSR support)
- **Styling**: Tailwind CSS 4.1.0
- **UI Components**: Radix UI (shadcn/ui)
- **State Management**: TanStack Query 5.90.2
- **Forms**: React Hook Form 7.65.0
- **Validation**: Zod 4.1.12
- **Testing**: Playwright 1.55.0 (E2E)
- **Component Development**: Storybook 8.5.11
- **PWA**: Serwist/Next 9.2.1
- **Animation**: Framer Motion 12.23.24
- **Build System**: Turbopack (Next.js built-in)
- **Rate Limiting**: Upstash Redis

### Available Specialist Agents

Use these agents for specialized tasks. Invoke them using the `@agent-<name>` syntax in the Claude Code CLI:

| Task Category | Agent | Notes |
|--------------|-------|-------|
| **Next.js Development** | `@agent-react-nextjs-expert` | App Router, SSR, SSG, ISR, Server Components, Server Actions, Metadata API |
| **React Components** | `@agent-react-component-architect` | React 19 patterns, hooks, component design, composition |
| **Tailwind Styling** | `@agent-tailwind-css-expert` | Tailwind CSS 4.1.0, utility-first design, responsive components |
| **API Design** | `@agent-api-architect` | RESTful API routes, Server Actions, GraphQL patterns |
| **Backend/Services** | `@agent-backend-developer` | Service layer, Supabase integration, business logic |
| **Code Review** | `@agent-code-reviewer` | Security-aware reviews, severity-tagged reports (MANDATORY for major changes) |
| **Performance** | `@agent-performance-optimizer` | Bottleneck identification, caching strategies, optimization (MANDATORY before production) |
| **Documentation** | `@agent-documentation-specialist` | Technical documentation, API specs, README updates |
| **Codebase Analysis** | `@agent-code-archaeologist` | Explore unfamiliar code, document legacy patterns |
| **Project Orchestration** | `@agent-tech-lead-orchestrator` | Multi-step complex features, architecture decisions |
| **Stack Detection** | `@agent-project-analyst` | Technology stack analysis and routing |

### Usage Examples

**Building a new feature:**
```bash
# Complex multi-step feature (recommended for new features)
claude "use @agent-tech-lead-orchestrator to build user authentication system"

# Next.js specific implementation
claude "use @agent-react-nextjs-expert to create a new dashboard page with SSR"

# React component development
claude "use @agent-react-component-architect to build a pilot profile card component"
```

**Code quality and review:**
```bash
# Before committing major changes
claude "use @agent-code-reviewer to review the new certification tracking feature"

# Performance audit
claude "use @agent-performance-optimizer to analyze the service layer performance"
```

**Styling and UI:**
```bash
# Tailwind CSS styling
claude "use @agent-tailwind-css-expert to create a responsive navigation component"
```

**API development:**
```bash
# API route design
claude "use @agent-api-architect to design the leave request API endpoints"
```

**Documentation:**
```bash
# Generate technical docs
claude "use @agent-documentation-specialist to document the service layer architecture"
```

### Agent Location

All agents are installed via symlink at:
```
~/.claude/agents/awesome-claude-agents/
├── core/              # code-reviewer, performance-optimizer, etc.
├── orchestrators/     # tech-lead-orchestrator, project-analyst
├── specialized/       # react/, django/, laravel/, etc.
└── universal/         # api-architect, backend-developer, etc.
```

### Best Practices

1. **Always use specialists when available** - They have deep domain expertise
2. **Use tech-lead-orchestrator for complex features** - Coordinates multiple specialists
3. **Run code-reviewer before commits** - Catches security and quality issues early
4. **Use performance-optimizer before production** - Ensures scalability
5. **Invoke by name** - Use `@agent-<name>` syntax in Claude Code CLI

---

## Key Commands

### Development
```bash
npm run dev               # Start dev server (http://localhost:3000)
npm run build             # Production build with Turbopack
npm run start             # Start production server
npm run validate          # Run type-check + lint + format:check (pre-commit)
```

### Testing
```bash
npm test                  # Run all Playwright E2E tests
npm run test:ui           # Open Playwright UI mode
npm run test:headed       # Run tests with visible browser
npm run test:debug        # Debug mode
npx playwright test e2e/auth.spec.ts  # Run single test file
```

### Database
```bash
npm run db:types          # Generate TypeScript types from Supabase schema
npm run db:migration      # Create new database migration
npm run db:deploy         # Deploy migrations to production
node test-connection.mjs  # Test Supabase connection
```

### Storybook
```bash
npm run storybook         # Start component dev server (http://localhost:6006)
npm run build-storybook   # Build static Storybook site
```

### Code Quality
```bash
npm run lint              # Run ESLint
npm run lint:fix          # Auto-fix ESLint issues
npm run type-check        # TypeScript validation (strict mode)
npm run format            # Format code with Prettier
npm run format:check      # Check formatting only
```

## Architecture Overview

### Service Layer Pattern (MANDATORY)

**Rule #1**: All database operations MUST use service functions. Never call Supabase directly.

```typescript
// ✅ CORRECT - Use service layer
import { getPilots } from '@/lib/services/pilot-service'

export async function GET() {
  const pilots = await getPilots()
  return NextResponse.json({ success: true, data: pilots })
}

// ❌ WRONG - Direct Supabase call
const { data } = await supabase.from('pilots').select('*')
```

### Implemented Services

All services located in `lib/services/`:

1. **`pilot-service.ts`** - Pilot CRUD operations, captain qualifications
2. **`certification-service.ts`** - Certification tracking and management
3. **`leave-service.ts`** - Leave request CRUD operations
4. **`leave-eligibility-service.ts`** - Complex leave eligibility logic (rank-separated)
5. **`expiring-certifications-service.ts`** - Certification expiry calculations
6. **`dashboard-service.ts`** - Dashboard metrics aggregation
7. **`analytics-service.ts`** - Analytics data processing
8. **`pdf-service.ts`** - PDF report generation
9. **`cache-service.ts`** - Performance caching with TTL
10. **`audit-service.ts`** - Audit logging for all CRUD operations
11. **`admin-service.ts`** - System settings and admin operations
12. **`user-service.ts`** - User management and role assignment
13. **`pilot-portal-service.ts`** - Pilot-facing portal operations

### Supabase Client Architecture

Three client types for different execution contexts:

1. **Browser Client** (`lib/supabase/client.ts`):
   - Use in Client Components (`'use client'`)
   - Cookie-based session management
   - Real-time subscriptions

2. **Server Client** (`lib/supabase/server.ts`):
   - Use in Server Components, Server Actions, Route Handlers
   - SSR-compatible with Next.js 15 async cookies (`await cookies()`)
   - Automatic session refresh

3. **Middleware Client** (`lib/supabase/middleware.ts`):
   - Handles authentication state across requests
   - Session refresh and cookie management
   - Protected route enforcement

### Project Structure

```
fleet-management-v2/
├── app/                          # Next.js 15 App Router
│   ├── api/                      # API routes (use services!)
│   │   ├── pilots/route.ts       # Pilot endpoints
│   │   ├── certifications/route.ts
│   │   ├── leave-requests/route.ts
│   │   └── analytics/route.ts
│   ├── dashboard/                # Admin dashboard
│   ├── portal/                   # Pilot portal
│   └── auth/                     # Authentication pages
│
├── components/                   # React components
│   ├── ui/                       # shadcn/ui components
│   ├── portal/                   # Pilot portal components
│   ├── forms/                    # Form components
│   └── layout/                   # Layout components
│
├── lib/                          # Core utilities
│   ├── services/                 # ⭐ Service layer (CRITICAL)
│   ├── supabase/                 # Supabase clients
│   ├── utils/                    # Utility functions
│   │   ├── roster-utils.ts       # 28-day roster period logic
│   │   ├── certification-utils.ts # FAA color coding
│   │   ├── error-messages.ts     # Standardized error messages
│   │   └── constraint-error-handler.ts
│   └── validations/              # Zod schemas
│
├── types/                        # TypeScript definitions
│   └── supabase.ts               # Generated database types (2000+ lines)
│
└── e2e/                          # Playwright E2E tests
```

## Database Schema

**Connected to**: Supabase Project `wgdmgvonqysflwdiiols`

### Main Tables
- `pilots` (27 records) - Pilot profiles, qualifications, seniority
- `pilot_checks` (607 records) - Certification records
- `check_types` (34 records) - Check type definitions
- `leave_requests` - Leave request system
- `an_users` - System authentication users
- `contract_types` (3 records) - Contract type definitions
- `flight_requests` - Flight request submissions
- `disciplinary_actions` - Disciplinary record tracking

### Database Views (Read-Only)
- `expiring_checks` - Simplified expiring certifications
- `detailed_expiring_checks` - Detailed certification expiry data
- `compliance_dashboard` - Fleet-wide compliance metrics
- `pilot_report_summary` - Comprehensive pilot summaries
- `captain_qualifications_summary` - Captain qualification tracking
- `dashboard_metrics` - Real-time dashboard statistics

### Database Functions
- `calculate_years_to_retirement(pilot_id)` - Retirement calculations
- `calculate_years_in_service(pilot_id)` - Service time calculations
- `get_fleet_compliance_summary()` - Fleet compliance percentage
- `get_fleet_expiry_statistics()` - Expiry distribution stats
- `get_pilot_dashboard_metrics()` - Pilot-specific metrics

### Type Generation

After any database schema changes:
```bash
npm run db:types
```

All Supabase clients are typed with `Database` from `@/types/supabase`.

## Critical Business Rules

### 1. Roster Period System (28-Day Cycles)

Leave requests operate on 28-day roster periods (RP1-RP13 annual cycle):
- Known anchor: **RP12/2025 starts 2025-10-11**
- After RP13/YYYY → automatically rolls to RP1/(YYYY+1)
- All leave requests must align to roster period boundaries
- Utility functions in `lib/utils/roster-utils.ts`

### 2. Certification Compliance (FAA Standards)

**Color Coding** (`lib/utils/certification-utils.ts`):
- 🔴 **Red**: Expired (days_until_expiry < 0)
- 🟡 **Yellow**: Expiring soon (days_until_expiry ≤ 30)
- 🟢 **Green**: Current (days_until_expiry > 30)

**Alert Thresholds**:
- Critical: Expired certifications
- Warning: ≤60 days until expiry
- Notice: ≤90 days until expiry

### 3. Leave Eligibility Logic (Rank-Separated)

**CRITICAL**: Captains and First Officers are evaluated **independently**.

**Minimum Crew Requirements**:
- Must maintain **10 Captains available** (per rank)
- Must maintain **10 First Officers available** (per rank)

**Approval Priority** (within same rank):
1. Seniority number (lower = higher priority, e.g., #1 beats #5)
2. Request submission date (earlier beats later)

**Approval Algorithm** (`lib/services/leave-eligibility-service.ts`):
- If single pilot requests dates → Approve if remaining crew ≥ 10
- If multiple pilots request same dates → Approve all if remaining ≥ 10, else approve by seniority until minimum reached

**Special Alerts**:
- **Eligibility Alert**: Shows when 2+ pilots of same rank request overlapping dates
- **Final Review Alert**: Appears 22 days before next roster period starts (only when pendingCount > 0)

### 4. Captain Qualifications

Stored in JSONB column `qualifications`:
- **Line Captain**: Standard captain qualification
- **Training Captain**: Authorized to conduct training
- **Examiner**: Authorized to conduct check rides
- **RHS Captain Expiry**: Right-hand seat captain currency tracking

Utilities in `lib/utils/qualification-utils.ts`

### 5. Seniority System

Based on `commencement_date` field:
- Earlier date = lower seniority number = higher priority
- Seniority numbers 1-27 (unique)
- Used for leave request prioritization

## Component Development

### Adding shadcn/ui Components

```bash
npx shadcn@latest add dialog
npx shadcn@latest add dropdown-menu
npx shadcn@latest add table
```

Components install to `components/ui/` and are fully customizable.

### Storybook Stories

Every new UI component should have a Storybook story:

```tsx
// components/pilots/pilot-card.stories.tsx
import type { Meta, StoryObj } from '@storybook/react'
import { PilotCard } from './pilot-card'

const meta = {
  title: 'Pilots/PilotCard',
  component: PilotCard,
  tags: ['autodocs'],
} satisfies Meta<typeof PilotCard>

export default meta
type Story = StoryObj<typeof meta>

export const Captain: Story = {
  args: {
    pilot: {
      id: '1',
      name: 'John Doe',
      rank: 'Captain',
      status: 'active',
    },
  },
}
```

### Server vs Client Components

**Server Components** (default in Next.js 15):
```tsx
// app/dashboard/pilots/page.tsx
import { createClient } from '@/lib/supabase/server'

export default async function PilotsPage() {
  const supabase = await createClient()
  const { data: { user } } = await supabase.auth.getUser()
  // Server-side data fetching
}
```

**Client Components** (for interactivity):
```tsx
'use client'
import { createClient } from '@/lib/supabase/client'

export function PilotForm() {
  const supabase = createClient()
  // Client-side mutations, real-time updates
}
```

## Form Handling Pattern

All forms use **React Hook Form + Zod validation**:

```typescript
// 1. Define Zod schema in lib/validations/
import { z } from 'zod'

export const PilotCreateSchema = z.object({
  first_name: z.string().min(1, 'First name required'),
  last_name: z.string().min(1, 'Last name required'),
  role: z.enum(['Captain', 'First Officer']),
})

// 2. Use in component
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'

const form = useForm({
  resolver: zodResolver(PilotCreateSchema),
  defaultValues: { first_name: '', last_name: '', role: 'Captain' }
})
```

## Error Handling

### Standardized Error Messages

Use `lib/utils/error-messages.ts`:

```typescript
import { ERROR_MESSAGES, formatApiError } from '@/lib/utils/error-messages'

// In API routes
return NextResponse.json(
  formatApiError(ERROR_MESSAGES.PILOT.FETCH_FAILED, 500),
  { status: 500 }
)
```

### Database Constraint Errors

Use `lib/utils/constraint-error-handler.ts`:

```typescript
import { handleConstraintError } from '@/lib/utils/constraint-error-handler'

try {
  // Database operation
} catch (error) {
  const errorResponse = handleConstraintError(error)
  return NextResponse.json(errorResponse, { status: 400 })
}
```

## Testing Strategy

### E2E Testing with Playwright

Test files in `e2e/` directory:

```typescript
import { test, expect } from '@playwright/test'

test.describe('Pilot Management', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/dashboard/pilots')
  })

  test('should display pilot list', async ({ page }) => {
    await expect(page.getByRole('heading', { name: 'Pilots' })).toBeVisible()
    const rows = page.getByRole('row')
    await expect(rows).toHaveCount(28) // 27 pilots + header
  })
})
```

**Run specific tests**:
```bash
npx playwright test e2e/pilots.spec.ts
npx playwright test --grep "should display pilot list"
```

## Environment Variables

Required in `.env.local`:

```env
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://wgdmgvonqysflwdiiols.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Application Configuration
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Optional: Service Role (server-only, never expose to client)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

Get credentials from:
https://app.supabase.com/project/wgdmgvonqysflwdiiols/settings/api

## Performance Optimizations

### Build System
- **Turbopack**: Used for both dev and production builds
- Significantly faster than Webpack
- Near-instant Hot Module Replacement (HMR)

### Lazy Loading
```tsx
import dynamic from 'next/dynamic'

const HeavyChart = dynamic(() => import('@/components/charts/analytics-chart'), {
  loading: () => <p>Loading chart...</p>,
  ssr: false, // Disable SSR for client-only components
})
```

### Image Optimization
```tsx
import Image from 'next/image'

<Image
  src="/pilot-photo.jpg"
  alt="Pilot"
  width={200}
  height={200}
  loading="lazy"
/>
```

Supported formats: WebP, AVIF (configured in `next.config.js`)

### Caching

Use `lib/services/cache-service.ts` for expensive operations:

```typescript
import { getCachedData, setCachedData } from '@/lib/services/cache-service'

const cacheKey = 'dashboard:metrics'
const cached = await getCachedData(cacheKey)
if (cached) return cached

const data = await expensiveCalculation()
await setCachedData(cacheKey, data, 300) // 5 minute TTL
return data
```

## Security

### Row Level Security (RLS)

All tables have RLS enabled. Policies enforce:
- Authenticated users can read data
- Admins can insert/update/delete
- Managers have elevated permissions
- Pilots have read-only access to their own data

### Protected Routes

Middleware (`middleware.ts`) handles authentication:
- Public routes: `/`, `/auth/*`
- Protected routes: `/dashboard/*` (requires authentication)
- Admin routes: `/dashboard/admin/*` (requires admin role)
- Portal routes: `/portal/*` (requires pilot or admin role)

### Environment Variables

- Never commit `.env.local` to git
- Client-side vars: `NEXT_PUBLIC_*` prefix
- Server-side vars: No prefix (keep sensitive)

## Development Workflow

### Feature Development Process

1. **Create Feature Branch**:
   ```bash
   git checkout -b feature/new-feature
   ```

2. **Implement Service Layer First** (if database operations needed):
   ```bash
   # Create or update service file
   touch lib/services/new-feature-service.ts
   ```

3. **Add Types** (if new tables/columns):
   ```bash
   npm run db:types
   ```

4. **Build API Routes** (use services):
   ```bash
   # Create API route
   touch app/api/new-feature/route.ts
   ```

5. **Build UI Components**:
   ```bash
   # Add shadcn component if needed
   npx shadcn@latest add dialog
   # Create custom component + Storybook story
   ```

6. **Write E2E Tests**:
   ```bash
   touch e2e/new-feature.spec.ts
   npm test
   ```

7. **Run Quality Checks**:
   ```bash
   npm run validate
   ```

8. **Commit and Push**:
   ```bash
   git add .
   git commit -m "feat: add new feature"
   git push origin feature/new-feature
   ```

### Pre-Commit Hooks

Husky + lint-staged automatically runs:
- ESLint with auto-fix
- Prettier with auto-format
- TypeScript type checking

If checks fail, commit is blocked.

## Troubleshooting

### Common Issues

**TypeScript errors about Supabase types**
```bash
npm run db:types
```

**Middleware errors with cookies**
Ensure using `await cookies()` in Next.js 15 (async cookies API).

**Playwright tests failing**
```bash
npx playwright install  # Install browsers
```

**Husky hooks not running**
```bash
npm run prepare
```

**Supabase connection fails**
```bash
node test-connection.mjs  # Diagnose connection issues
```

**Build fails with type errors**
Check that `types/supabase.ts` is up to date with the database schema.

## Additional Resources

- [WORK-PLAN.md](./WORK-PLAN.md) - 9-week implementation plan
- [PROJECT-SUMMARY.md](./PROJECT-SUMMARY.md) - Tech stack overview
- [CONTRIBUTING.md](./CONTRIBUTING.md) - Contribution guidelines
- [SETUP.md](./SETUP.md) - Detailed setup instructions
- [lib/services/SERVICE-MIGRATION-GUIDE.md](./lib/services/SERVICE-MIGRATION-GUIDE.md) - Service layer migration guide

## Technology Stack

| Technology | Version | Purpose |
|------------|---------|---------|
| Next.js | 15.5.4 | App framework with App Router |
| React | 19.1.0 | UI library |
| TypeScript | 5.7.3 | Type safety (strict mode) |
| Turbopack | Built-in | Build system |
| Tailwind CSS | 4.1.0 | Styling |
| Supabase | 2.47.10 | Backend (PostgreSQL + Auth + Storage) |
| TanStack Query | 5.90.2 | Server state management |
| React Hook Form | 7.63.0 | Form handling |
| Zod | 4.1.11 | Schema validation |
| Playwright | 1.55.0 | E2E testing |
| Storybook | 8.5.11 | Component development |

## Progressive Web App (PWA) Support

Fleet Management V2 is a Progressive Web App that works offline and can be installed on mobile devices.

### PWA Features

- **Offline Support**: View previously loaded data when offline
- **Mobile Installation**: Install app on iOS and Android devices
- **Intelligent Caching**: Smart caching strategies for performance
- **Offline Indicator**: Visual feedback when connectivity is lost
- **Service Worker**: Auto-generated with Serwist

### Caching Strategies

The app uses different caching strategies for different resource types:

| Resource Type | Strategy | Cache Duration | Purpose |
|--------------|----------|----------------|---------|
| **Fonts** | CacheFirst | 1 year | Fonts rarely change |
| **Images** | StaleWhileRevalidate | 24 hours | Balance freshness and speed |
| **API Calls** | NetworkFirst | 1 minute | Always try fresh data first |
| **Supabase API** | NetworkFirst | 1 minute | Fallback to cache if offline |

### Offline Functionality

**What works offline:**
- ✅ View previously loaded pages
- ✅ Access cached pilot information
- ✅ Review certification data
- ✅ Navigate between cached pages

**What requires online connection:**
- ❌ Create/update/delete operations
- ❌ Upload documents
- ❌ Sync new data
- ❌ Real-time updates

### Installation

**Android (Chrome):**
1. Visit the app in Chrome
2. Tap "Install" prompt or menu → "Install app"
3. App appears on home screen

**iOS (Safari):**
1. Visit the app in Safari
2. Tap Share button → "Add to Home Screen"
3. App appears on home screen with custom icon

### PWA Configuration

**Service Worker**: `/public/sw.js` (auto-generated, do not edit)

**Manifest**: `/public/manifest.json`
```json
{
  "name": "Fleet Management V2 - B767 Pilot Management System",
  "short_name": "Fleet Mgmt",
  "start_url": "/",
  "display": "standalone"
}
```

**Build Configuration**: `next.config.js`
```javascript
const withSerwist = require('@serwist/next').default({
  swSrc: 'app/sw.ts',
  swDest: 'public/sw.js',
  disable: process.env.NODE_ENV === 'development'
})
```

### Development vs Production

**Development** (PWA disabled):
- No service worker registration
- No caching (hot reload works normally)
- Offline indicator still functional

**Production** (PWA enabled):
- Service worker auto-generated during build
- Intelligent caching active
- Offline fallback page available

### Updating the Service Worker

When deploying new versions:

1. Build generates new service worker with updated hash
2. Users get update notification on next visit
3. Refresh page to activate new service worker
4. Old caches automatically invalidated

### Clear Service Worker Cache

If needed (troubleshooting):

```javascript
// Open DevTools Console
navigator.serviceWorker.getRegistrations().then(registrations => {
  registrations.forEach(r => r.unregister())
})
caches.keys().then(keys => keys.forEach(key => caches.delete(key)))
```

Then refresh the page.

### PWA Icons

Icons located in `/public/icons/`:
- `icon-192x192.png` - Android home screen
- `icon-512x512.png` - Android splash screen
- `apple-touch-icon.png` - iOS home screen
- `favicon-32x32.png` - Browser tab
- `favicon-16x16.png` - Browser bookmark

**Generate icons**: `node scripts/generate-pwa-icons.mjs`

For production, replace with professionally designed icons.

### Troubleshooting

**Service worker not registering:**
- Check browser console for errors
- Verify HTTPS (required for PWA)
- Ensure `public/sw.js` exists after build

**Offline indicator not showing:**
- Check DevTools → Network → Set to "Offline"
- Verify OfflineIndicator component in layout

**Stale data showing:**
- Service worker may be caching aggressively
- Clear service worker cache (see above)
- Check cache expiration times in `app/sw.ts`

**Install prompt not showing:**
- PWA criteria may not be met
- Check manifest.json is valid
- Verify service worker is active
- Android: Check Chrome flags

---

**Version**: 2.0.1
**Last Updated**: October 22, 2025
**Maintainer**: Maurice (Skycruzer)
